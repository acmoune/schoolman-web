{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Paper, Typography } from '@material-ui/core';\nimport axios from 'axios';\nimport { currency } from '../lib/utilities';\nimport { getCookieFromBrowser } from '../lib/cookie';\nimport { apiBaseUrl, authCookieName } from '../app.config';\nexport default function Bill({\n  bill\n}) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount;\n\n  const statusColor = () => {\n    if (isPaid) return 'green';\n    return 'red';\n  };\n\n  return __jsx(Paper, {\n    style: {\n      padding: 10,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      paddingBottom: 5,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    color: \"secondary\"\n  }, bill.description), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, \"Fee type: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, bill.feeType), \" \\xA0 Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(bill.amount)), \" \\xA0 Status: \", __jsx(\"span\", {\n    style: {\n      color: statusColor()\n    }\n  }, isPaid ? 'Paid' : 'Not Paid'))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"a\", {\n    onClick: () => {\n      axios.get(`${apiBaseUrl}/printpdf/bills/${bill.billId}`, {\n        responseType: 'blob',\n        // important\n        headers: {\n          'schoolman_token': getCookieFromBrowser(authCookieName)\n        }\n      }).then(res => {\n        const url = window.URL.createObjectURL(new Blob([res.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', `imit-bill-${bill.billId}.pdf`);\n        document.body.appendChild(link);\n        link.click();\n      });\n    },\n    style: {\n      textDecoration: 'none',\n      color: 'green',\n      cursor: 'pointer'\n    }\n  }, \"Print Bill\"))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginBottom: 5\n    }\n  }, \"Payments\"), bill.payments.length > 0 ? bill.payments.map(p => __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      padding: '5px 0px',\n      borderTop: '1px solid #DFDFDF',\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, \"Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(p.amount)), \" \\xA0 Date: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, p.date)))) : __jsx(\"div\", {\n    style: {\n      padding: '10px 0px'\n    }\n  }, \"(No payment)\"), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt',\n      paddingTop: 5,\n      marginTop: 10,\n      textAlign: 'right'\n    }\n  }, \"Total paid: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))), \" \\xA0 Remaining: \", __jsx(\"span\", {\n    style: {\n      color: 'orange'\n    }\n  }, currency(Math.max(0, bill.amount - bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))));\n}","map":null,"metadata":{},"sourceType":"module"}