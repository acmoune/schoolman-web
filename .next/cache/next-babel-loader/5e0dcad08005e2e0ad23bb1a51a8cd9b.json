{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/data/apps/opensource/SchoolMan/web-client/pages/training.tsx\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getTrainingById($trainingId: ID!) {\\n    training(trainingId: $trainingId) {\\n      id\\n      title\\n      description\\n      banner\\n      link\\n      requiredOptionalUnits\\n      prerequisites\\n      qualifications\\n      units { id title syllabus optional }\\n      plans {\\n        id\\n        title\\n        description\\n        duration\\n        fees { id description feeType amount promotionalAmount optional }\\n        currentSessions {\\n          id\\n          title\\n          startDate\\n          status\\n          fees { id description feeType amount promotionalAmount optional }\\n        }\\n      }\\n      program {id title logo }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { gql } from 'apollo-boost';\nimport { apiServer } from '../app.config';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nimport s3 from '../lib/s3';\nimport { currency } from '../lib/utilities';\nimport { Paper, Typography, Grid, Table, TableHead, TableBody, TableRow, TableCell, ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails } from '@material-ui/core';\nimport Container from '../components/Container';\nimport MainLayout from '../layouts/MainLayout';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\n\nfunction Units(props) {\n  var classes = makeStyles(function (theme) {\n    return createStyles({\n      root: {\n        marginTop: 20\n      },\n      heading: {\n        flexGrow: 1\n      },\n      secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary\n      }\n    });\n  })();\n\n  var _React$useState = React.useState(-1),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      currPanelId = _React$useState2[0],\n      setCurrPanelId = _React$useState2[1];\n\n  var handleChange = function handleChange(id) {\n    return function (event) {\n      if (id === currPanelId) setCurrPanelId(-1);else setCurrPanelId(id);\n    };\n  };\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Units\")), props.units.length > 0 ? props.units.map(function (u) {\n    return __jsx(ExpansionPanel, {\n      expanded: currPanelId === u.id,\n      onChange: handleChange(u.id),\n      key: u.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, __jsx(ExpansionPanelSummary, {\n      expandIcon: __jsx(ExpandMoreIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }),\n      \"aria-controls\": \"panel\".concat(u.id),\n      id: \"panel\".concat(u.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, __jsx(Typography, {\n      className: classes.heading,\n      variant: \"inherit\",\n      style: {\n        color: '#CC9B05'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, u.title), __jsx(Typography, {\n      className: classes.secondaryHeading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, u.optional ? 'Optional' : 'Required')), __jsx(ExpansionPanelDetails, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: {\n        flexGrow: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: u.syllabus\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }))));\n  }) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"No Units\"));\n}\n\nfunction Plan(props) {\n  var router = useRouter();\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      paddingLeft: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, props.plan.title)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"caption\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, props.plan.description)), __jsx(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    style: {\n      border: '1px solid #DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    key: \"duration\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Duration\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, props.plan.duration))))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginTop: 15,\n      fontSize: '11pt'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Fees\"), props.plan.fees.length > 0 ? __jsx(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    style: {\n      border: '1px solid #DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(TableHead, {\n    style: {\n      backgroundColor: '#DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Description\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Type\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Amount\"))), __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, props.plan.fees.map(function (f) {\n    return __jsx(TableRow, {\n      key: f.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, __jsx(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, f.description, \" \", f.optional && __jsx(\"span\", {\n      style: {\n        color: '#808080'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"(Optional)\")), __jsx(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, f.feeType), __jsx(TableCell, {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, f.promotionalAmount > 0 ? __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, __jsx(\"span\", {\n      style: {\n        textDecoration: 'line-through'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, currency(f.amount)), \" \\xA0\", __jsx(\"span\", {\n      style: {\n        color: 'orange'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, currency(f.promotionalAmount))) : __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, currency(f.amount))));\n  })))) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"No fees\"), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginTop: 15,\n      fontSize: '11pt'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Current Sessions\"), props.plan.currentSessions.length > 0 ? __jsx(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    style: {\n      border: '1px solid #DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, __jsx(TableHead, {\n    style: {\n      backgroundColor: '#DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Title\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Start date\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Status\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }))), __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, props.plan.currentSessions.map(function (s) {\n    return __jsx(TableRow, {\n      key: s.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, __jsx(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, s.title), __jsx(TableCell, {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, s.startDate), __jsx(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, s.status), __jsx(TableCell, {\n      align: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, __jsx(Link, {\n      href: {\n        pathname: '/application',\n        query: {\n          tsId: s.id\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Apply\"))));\n  })))) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"There is no new session right now, we should schedule one shortly, please check again later\")));\n}\n\nfunction Plans(props) {\n  var classes = makeStyles(function (theme) {\n    return createStyles({\n      root: {\n        marginTop: 20\n      },\n      planItem: {\n        fontSize: '11pt',\n        color: '#808080',\n        cursor: 'pointer',\n        padding: 5,\n        borderRadius: 3\n      },\n      selectedPlanItem: {\n        backgroundColor: '#FABD03',\n        color: '#000000'\n      }\n    });\n  })();\n\n  var _React$useState3 = React.useState(props.plans.length > 0 ? 0 : -1),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      currentPlanId = _React$useState4[0],\n      setCurrentPlanId = _React$useState4[1];\n\n  var handleClick = function handleClick(id) {\n    return function (event) {\n      return setCurrentPlanId(id);\n    };\n  };\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"subtitle2\",\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Plans\")), __jsx(Paper, {\n    style: {\n      padding: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, props.plans.map(function (p, i) {\n    return __jsx(\"div\", {\n      key: p.id,\n      className: \"\".concat(classes.planItem, \" \").concat(i === currentPlanId ? classes.selectedPlanItem : ''),\n      onClick: handleClick(i),\n      style: {\n        position: 'relative',\n        paddingRight: 22\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, p.title, p.currentSessions.length > 0 && __jsx(\"span\", {\n      style: {\n        fontSize: '8pt',\n        width: 16,\n        height: 16,\n        textAlign: 'center',\n        borderRadius: '50%',\n        backgroundColor: '#444444',\n        color: 'white',\n        position: 'absolute',\n        right: 5,\n        top: 7,\n        display: 'inline-block'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, p.currentSessions.length));\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }, currentPlanId !== -1 ? __jsx(Plan, {\n    plan: props.plans[currentPlanId],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"No plan selected\")))));\n}\n\nvar GET_ONE_TRAINING_QUERY = gql(_templateObject());\n\nfunction TrainingPage(props) {\n  var t = props.training;\n  var banner = t.banner ? s3.getFileUrl(t.banner) : \"\".concat(apiServer, \"/assets/images/trainings/no-banner.jpg\");\n  return __jsx(MainLayout, {\n    title: \"\".concat(props.training.title),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    src: banner,\n    alt: \"\",\n    style: {\n      width: '100%',\n      marginTop: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  }), __jsx(Paper, {\n    style: {\n      padding: 15,\n      marginTop: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, t.title)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"caption\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, t.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, t.link ? __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: t.link,\n    style: {\n      textDecoration: 'none',\n      fontSize: '8pt',\n      color: '#339967'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278\n    },\n    __self: this\n  }, \"Official  vendor link\")) : null), __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    style: {\n      border: '1px solid #DFDFDF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287\n    },\n    __self: this\n  }, __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    key: t.prerequisites,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, \"Program\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: {\n      pathname: \"/program\",\n      query: {\n        programId: t.program.id\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }, t.program.title)))), t.prerequisites && __jsx(TableRow, {\n    key: t.prerequisites,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298\n    },\n    __self: this\n  }, \"Prerequisites\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299\n    },\n    __self: this\n  }, t.prerequisites)), t.qualifications && __jsx(TableRow, {\n    key: t.qualifications,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }, \"Qualifications\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, t.qualifications)), __jsx(TableRow, {\n    key: \"reqNum\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }, \"Required number of optional units\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  }, t.requiredOptionalUnits || 0)))))), __jsx(Plans, {\n    plans: t.plans,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }), __jsx(Units, {\n    units: t.units,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320\n    },\n    __self: this\n  })));\n}\n\nTrainingPage.getInitialProps = function _callee(_ref) {\n  var query, apolloClient, token, _ref2, training;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = _ref.query, apolloClient = _ref.apolloClient, token = _ref.token;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(apolloClient.query({\n            query: GET_ONE_TRAINING_QUERY,\n            variables: {\n              trainingId: _parseInt(query.trainingId, 10)\n            },\n            context: {\n              headers: {\n                'schoolman_token': token\n              }\n            }\n          }));\n\n        case 3:\n          _ref2 = _context.sent;\n          training = _ref2.data.training;\n          return _context.abrupt(\"return\", {\n            training: training,\n            authRequired: false\n          });\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default withApollo(withAuth(TrainingPage));","map":{"version":3,"sources":["/data/apps/opensource/SchoolMan/web-client/pages/training.tsx"],"names":["React","Link","useRouter","gql","apiServer","withApollo","withAuth","s3","currency","Paper","Typography","Grid","Table","TableHead","TableBody","TableRow","TableCell","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","Container","MainLayout","ExpandMoreIcon","makeStyles","createStyles","Units","props","classes","theme","root","marginTop","heading","flexGrow","secondaryHeading","fontSize","typography","pxToRem","color","palette","text","secondary","useState","currPanelId","setCurrPanelId","handleChange","id","event","marginBottom","units","length","map","u","title","optional","__html","syllabus","Plan","router","paddingLeft","plan","description","border","duration","fees","backgroundColor","f","feeType","promotionalAmount","textDecoration","amount","currentSessions","s","startDate","status","pathname","query","tsId","Plans","planItem","cursor","padding","borderRadius","selectedPlanItem","plans","currentPlanId","setCurrentPlanId","handleClick","p","i","position","paddingRight","width","height","textAlign","right","top","display","GET_ONE_TRAINING_QUERY","TrainingPage","t","training","banner","getFileUrl","link","prerequisites","programId","program","qualifications","requiredOptionalUnits","getInitialProps","apolloClient","token","variables","trainingId","context","headers","data","authRequired"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\nimport { gql } from 'apollo-boost'\nimport { apiServer } from '../app.config'\nimport withApollo from '../lib/with-apollo'\nimport withAuth from '../lib/with-auth'\nimport s3 from '../lib/s3'\nimport { currency } from '../lib/utilities'\n\nimport {\n  Paper,\n  Typography,\n  Grid,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  Button\n} from '@material-ui/core'\nimport Container from '../components/Container'\nimport MainLayout from '../layouts/MainLayout'\nimport ITraining from '../server/src/models/catalog/Training'\nimport ITrainingUnit from '../server/src/models/catalog/TrainingUnit'\nimport ITrainingPlan from '../server/src/models/catalog/TrainingPlan'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nfunction Units(props: { units: ITrainingUnit[] }) {\n  const classes = makeStyles((theme: Theme) => createStyles({\n    root: { marginTop: 20 },\n    heading: {\n      flexGrow: 1\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    }\n  }))()\n\n  const [currPanelId, setCurrPanelId] = React.useState<number>(-1)\n  const handleChange = (id: number) => (event: React.ChangeEvent<{}>) => {\n    if (id === currPanelId) setCurrPanelId(-1)\n    else setCurrPanelId(id)\n  }\n  \n  return (\n    <div className={classes.root}>\n      <div style={{ marginBottom: 10 }}>\n        <Typography variant=\"subtitle2\" color=\"primary\">Units</Typography>\n      </div>\n\n      {props.units.length > 0 ? \n        props.units.map(u =>\n          <ExpansionPanel expanded={currPanelId === u.id} onChange={handleChange(u.id)} key={u.id}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />} aria-controls={`panel${u.id}`} id={`panel${u.id}`}>\n              <Typography className={classes.heading} variant=\"inherit\" style={{ color: '#CC9B05' }}>{u.title}</Typography>\n              <Typography className={classes.secondaryHeading}>{u.optional ? 'Optional' : 'Required'}</Typography>\n            </ExpansionPanelSummary>\n\n            <ExpansionPanelDetails>\n              <div style={{ flexGrow: 1 }}>\n                <div dangerouslySetInnerHTML={{ __html: u.syllabus }} />\n              </div>\n            </ExpansionPanelDetails>\n          </ExpansionPanel>\n        ) :\n        <span>No Units</span>\n      }\n    </div>\n  )\n}\n\nfunction Plan(props: { plan: ITrainingPlan }) {\n  const router = useRouter()\n\n  return (\n    <div>\n      <div style={{ paddingLeft: 15 }}>\n        <div><Typography variant=\"h5\">{props.plan.title}</Typography></div>\n        <div>\n          <Typography variant=\"caption\" style={{ color: '#808080' }}>{props.plan.description}</Typography>\n        </div>\n\n        <div style={{ marginTop: 10 }}>\n          <Table size=\"small\" style={{ border: '1px solid #DFDFDF' }}>\n            <TableBody>\n              <TableRow key=\"duration\">\n                <TableCell component=\"th\" scope=\"row\" style={{ color: '#808080' }}>Duration</TableCell>\n                <TableCell align=\"right\">{props.plan.duration}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </div>\n\n        <div style={{color: '#808080', marginTop: 15, fontSize: '11pt' }}>Fees</div>\n\n        {props.plan.fees.length > 0 ?\n          <div style={{ marginTop: 10 }}>\n            <Table size=\"small\" style={{ border: '1px solid #DFDFDF' }}>\n              <TableHead style={{ backgroundColor: '#DFDFDF' }}>\n                <TableRow>\n                  <TableCell>Description</TableCell>\n                  <TableCell>Type</TableCell>\n                  <TableCell align=\"right\">Amount</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {props.plan.fees.map(f => (\n                  <TableRow key={f.id}>\n                    <TableCell>{f.description} {f.optional && <span style={{color: '#808080'}}>(Optional)</span>}</TableCell>\n                    <TableCell>{f.feeType}</TableCell>\n                    <TableCell align=\"right\">\n                      {f.promotionalAmount > 0 ?\n                        <div>\n                          <span style={{textDecoration: 'line-through'}}>{currency(f.amount)}</span> &nbsp;\n                          <span style={{color: 'orange'}}>{currency(f.promotionalAmount)}</span>\n                        </div> :\n                        <span>{currency(f.amount)}</span>\n                      }\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div> :\n          <span>No fees</span>\n        }\n\n        <div style={{color: '#808080', marginTop: 15, fontSize: '11pt'}}>Current Sessions</div>\n\n        {props.plan.currentSessions.length > 0 ?\n          <div style={{ marginTop: 10 }}>\n            <Table size=\"small\" style={{ border: '1px solid #DFDFDF' }}>\n              <TableHead style={{ backgroundColor: '#DFDFDF' }}>\n                <TableRow>\n                  <TableCell>Title</TableCell>\n                  <TableCell  align=\"right\">Start date</TableCell>\n                  <TableCell>Status</TableCell>\n                  <TableCell />\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {props.plan.currentSessions.map(s => (\n                  <TableRow key={s.id}>\n                    <TableCell>{s.title}</TableCell>\n                    <TableCell align=\"right\">{s.startDate}</TableCell>\n                    <TableCell>{s.status}</TableCell>\n                    <TableCell align=\"right\">\n                      <Link href={{ pathname: '/application', query: { tsId: s.id } }}>\n                        <a>Apply</a>\n                      </Link>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </div> :\n          <span>There is no new session right now, we should schedule one shortly, please check again later</span>\n        }\n      </div>\n    </div>\n  )\n}\n\nfunction Plans(props: { plans: ITrainingPlan[] }) {\n  const classes = makeStyles((theme: Theme) => createStyles({\n    root: { marginTop: 20 },\n    planItem: {\n      fontSize: '11pt',\n      color: '#808080',\n      cursor: 'pointer',\n      padding: 5,\n      borderRadius: 3\n    },\n    selectedPlanItem: {backgroundColor: '#FABD03', color: '#000000'}\n  }))()\n\n  const [currentPlanId, setCurrentPlanId] = React.useState<number>(props.plans.length > 0 ? 0 : -1)\n  const handleClick = (id: number) => (event: React.ChangeEvent<{}>) =>\n    setCurrentPlanId(id)\n\n  return (\n    <div className={classes.root}>\n      <div style={{ marginBottom: 10 }}>\n        <Typography variant=\"subtitle2\" color=\"primary\">Plans</Typography>\n      </div>\n      \n      <Paper style={{ padding: 15 }}>\n        <Grid container spacing={2}>\n          <Grid item xs={12} md={4}>\n            {props.plans.map((p, i) => (\n              <div\n                key={p.id}\n                className={`${classes.planItem} ${i === currentPlanId ? classes.selectedPlanItem : ''}`}\n                onClick={handleClick(i)}\n                style={{position: 'relative', paddingRight: 22}}\n              >\n                {p.title}\n                \n                {p.currentSessions.length > 0  && (\n                  <span style={{fontSize: '8pt', width: 16, height: 16, textAlign: 'center', borderRadius: '50%', backgroundColor: '#444444', color: 'white', position: 'absolute', right: 5, top: 7, display: 'inline-block'}}>\n                    {p.currentSessions.length}\n                  </span>\n                )}\n              </div>\n            ))}\n          </Grid>\n\n          <Grid item xs={12} md={8}>\n            {(currentPlanId !== -1) ? \n              <Plan plan={props.plans[currentPlanId]} /> : \n              <span>No plan selected</span>\n            }\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  )\n}\n\nconst GET_ONE_TRAINING_QUERY = gql`\n  query getTrainingById($trainingId: ID!) {\n    training(trainingId: $trainingId) {\n      id\n      title\n      description\n      banner\n      link\n      requiredOptionalUnits\n      prerequisites\n      qualifications\n      units { id title syllabus optional }\n      plans {\n        id\n        title\n        description\n        duration\n        fees { id description feeType amount promotionalAmount optional }\n        currentSessions {\n          id\n          title\n          startDate\n          status\n          fees { id description feeType amount promotionalAmount optional }\n        }\n      }\n      program {id title logo }\n    }\n  }\n`\n\nfunction TrainingPage(props: { training: ITraining }) {\n\n  const t: ITraining = props.training\n  const banner = t.banner ? s3.getFileUrl(t.banner) : `${apiServer}/assets/images/trainings/no-banner.jpg`\n\n  return (\n    <MainLayout title={`${props.training.title}`}>\n      <Container>\n        <img src={banner} alt=\"\" style={{width: '100%', marginTop: 0}} />\n\n        <Paper style={{ padding: 15, marginTop: 5 }}>\n          <div><Typography variant=\"h5\">{t.title}</Typography></div>\n          <div>\n            <Typography variant=\"caption\" style={{ color: '#808080' }}>{t.description}</Typography>\n          </div>\n\n          <div>\n            {t.link ? \n              <div>\n                <a href={t.link} style={{textDecoration: 'none', fontSize: '8pt', color: '#339967'}}>\n                  Official  vendor link\n                </a>\n              </div> : \n              null\n            }\n          </div>\n\n          <div style={{ marginTop: 15 }}>\n            <Table size=\"small\" style={{ border: '1px solid #DFDFDF' }}>\n              <TableBody>\n                <TableRow key={t.prerequisites}>\n                  <TableCell component=\"th\" scope=\"row\" style={{ color: '#808080' }}>Program</TableCell>\n                  <TableCell align=\"right\">\n                    <Link href={{ pathname: \"/program\", query: {programId: t.program.id} }}><a>{t.program.title}</a></Link>\n                  </TableCell>\n                </TableRow>\n\n                {t.prerequisites && (\n                  <TableRow key={t.prerequisites}>\n                    <TableCell component=\"th\" scope=\"row\" style={{ color: '#808080' }}>Prerequisites</TableCell>\n                    <TableCell align=\"right\">{t.prerequisites}</TableCell>\n                  </TableRow>\n                )}\n\n                {t.qualifications && (\n                  <TableRow key={t.qualifications}>\n                    <TableCell component=\"th\" scope=\"row\" style={{ color: '#808080' }}>Qualifications</TableCell>\n                    <TableCell align=\"right\">{t.qualifications}</TableCell>\n                  </TableRow>\n                )}\n\n                <TableRow key=\"reqNum\">\n                  <TableCell component=\"th\" scope=\"row\" style={{ color: '#808080' }}>Required number of optional units</TableCell>\n                  <TableCell align=\"right\">{t.requiredOptionalUnits || 0}</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </div>\n        </Paper>\n\n        <Plans plans={t.plans} />\n        <Units units={t.units} />\n      </Container>\n    </MainLayout>\n  )\n}\n\nTrainingPage.getInitialProps = async ({ query, apolloClient, token }: any) => {\n  const { data: { training }} = await apolloClient.query({\n    query: GET_ONE_TRAINING_QUERY,\n    variables: { trainingId: parseInt(query.trainingId, 10) },\n    context: { headers: { 'schoolman_token': token } }\n  })\n\n  return ({ training, authRequired: false })\n}\n\nexport default withApollo(withAuth(TrainingPage))\n"]},"metadata":{},"sourceType":"module"}