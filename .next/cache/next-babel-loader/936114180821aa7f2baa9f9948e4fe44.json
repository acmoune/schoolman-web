{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation updateProfile($accountId: ID!, $profileId: ID!, $data: ProfileDataInput!) {\\n    updateProfile(accountId: $accountId, profileId: $profileId, data: $data) {\\n      id birthDate birthPlace residence phoneNumber nationality\\n      nicNumber nicDateOfIssue nicPlaceOfIssue\\n      highestAcademicQualification yearOfIssue englishGradeInGCEOL mathematicsGradeInGCEOL\\n      professionalQualification employmentStatus jobTitle yearsOfExperience employerName employerAddress\\n      otherDetails\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport MainLayout from '../layouts/MainLayout';\nimport ProfileForm from '../components/ProfileForm';\nimport { useAuth } from '../components/AuthContext';\nimport Container from '../components/Container';\nimport { Typography, Button } from '@material-ui/core';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Router from 'next/router';\nimport Alert from '../components/Alert';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nvar UPDATE_PROFILE_MUTATION = gql(_templateObject());\n\nfunction EditProfile() {\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var _useMutation = useMutation(UPDATE_PROFILE_MUTATION),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      updateProfile = _useMutation2[0],\n      _ = _useMutation2[1];\n\n  var _useState = useState({\n    open: false,\n    level: 'info',\n    message: ''\n  }),\n      alertOptions = _useState[0],\n      setAlertOptions = _useState[1];\n\n  return __jsx(MainLayout, {\n    title: \"Edit Profile\"\n  }, currentUser && __jsx(\"div\", null, __jsx(Container, null, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      marginTop: 15,\n      marginBottom: 15,\n      paddingBottom: 10,\n      borderBottom: '1px solid #DFDFDF'\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    color: \"textSecondary\",\n    style: {\n      flexGrow: 1\n    }\n  }, \"Edit Profile\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: function onClick() {\n      return Router.push('/myProfile');\n    }\n  }, \"Cancel\"))), __jsx(Container, {\n    maxWidth: 600\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(ProfileForm, {\n    profile: currentUser.profile,\n    onSubmit: function onSubmit(data) {\n      updateProfile({\n        variables: {\n          accountId: currentUser.id,\n          profileId: currentUser.profile.id,\n          data: data\n        }\n      }).then(function () {\n        return Router.push('/myProfile');\n      })[\"catch\"](function (err) {\n        return setAlertOptions({\n          open: true,\n          level: 'error',\n          message: err.message\n        });\n      });\n    }\n  }), __jsx(Alert, {\n    level: alertOptions.level,\n    message: alertOptions.message,\n    open: alertOptions.open,\n    onClose: function onClose() {\n      return setAlertOptions({\n        open: false,\n        level: alertOptions.level,\n        message: alertOptions.message\n      });\n    }\n  })))));\n}\n\nEditProfile.getInitialProps = function () {\n  return {\n    authRequired: true\n  };\n};\n\nexport default withApollo(withAuth(EditProfile));","map":null,"metadata":{},"sourceType":"module"}