{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Paper, Typography } from '@material-ui/core';\nimport axios from 'axios';\nimport { currency } from '../lib/utilities';\nimport { getCookieFromBrowser } from '../lib/cookie';\nimport { apiBaseUrl, authCookieName } from '../app.config';\nexport default function Bill({\n  bill\n}) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount;\n\n  const statusColor = () => {\n    if (isPaid) return 'green';\n    return 'red';\n  };\n\n  return __jsx(Paper, {\n    style: {\n      padding: 10,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      paddingBottom: 5,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    color: \"secondary\"\n  }, bill.description), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, \"Fee type: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, bill.feeType), \" \\xA0 Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(bill.amount)), \" \\xA0 Status: \", __jsx(\"span\", {\n    style: {\n      color: statusColor()\n    }\n  }, isPaid ? 'Paid' : 'Not Paid'))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"a\", {\n    onClick: () => {\n      axios.get(`${apiBaseUrl}/printpdf/bills/${bill.billId}`, {\n        responseType: 'blob',\n        // important\n        headers: {\n          'schoolman_token': getCookieFromBrowser(authCookieName)\n        }\n      }).then(res => {\n        const url = window.URL.createObjectURL(new Blob([res.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', `imit-bill-${bill.billId}.pdf`);\n        document.body.appendChild(link);\n        link.click();\n      });\n    },\n    style: {\n      textDecoration: 'none',\n      color: 'green',\n      cursor: 'pointer'\n    }\n  }, \"Print Bill\"))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginBottom: 5\n    }\n  }, \"Payments\"), bill.payments.length > 0 ? bill.payments.map(p => __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      padding: '5px 0px',\n      borderTop: '1px solid #DFDFDF',\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, \"Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(p.amount)), \" \\xA0 Date: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, p.date)))) : __jsx(\"div\", {\n    style: {\n      padding: '10px 0px'\n    }\n  }, \"(No payment)\"), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt',\n      paddingTop: 5,\n      marginTop: 10,\n      textAlign: 'right'\n    }\n  }, \"Total paid: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))), \" \\xA0 Remaining: \", __jsx(\"span\", {\n    style: {\n      color: 'orange'\n    }\n  }, currency(Math.max(0, bill.amount - bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))));\n}","map":{"version":3,"sources":["/data/apps/school-manager-client/components/Bill.tsx"],"names":["React","Paper","Typography","axios","currency","getCookieFromBrowser","apiBaseUrl","authCookieName","Bill","bill","isPaid","payments","reduce","s","p","amount","statusColor","padding","marginBottom","display","paddingBottom","flexGrow","description","color","fontSize","feeType","get","billId","responseType","headers","then","res","url","window","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","textDecoration","cursor","length","map","borderTop","date","paddingTop","marginTop","textAlign","Math","max"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { IBill } from '../server/src/models/accounts/Enrollment'\nimport { Paper, Typography } from '@material-ui/core'\nimport axios from 'axios'\nimport { currency } from '../lib/utilities'\nimport { getCookieFromBrowser } from '../lib/cookie'\nimport { apiBaseUrl, authCookieName } from '../app.config'\n\nexport default function Bill({ bill }: { bill: IBill }) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount\n\n  const statusColor = () => {\n    if (isPaid) return 'green'\n    return 'red'\n  }\n\n  return (\n    <Paper style={{ padding: 10, marginBottom: 10 }}>\n      <div style={{ display: 'flex', paddingBottom: 5, marginBottom: 10 }}>\n        <div style={{ flexGrow: 1 }}>\n          <Typography variant=\"body1\" color=\"secondary\">{bill.description}</Typography>\n\n          <div style={{ color: '#808080', fontSize: '9pt' }}>\n            Fee type: <span style={{color: '#000000'}}>{bill.feeType}</span> &nbsp;\n            Amount: <span style={{color: '#000000'}}>{currency(bill.amount)}</span> &nbsp;\n            Status: <span style={{ color: statusColor() }}>{isPaid ? 'Paid' : 'Not Paid'}</span>\n          </div>\n        </div>\n\n        <div style={{ color: '#808080', fontSize: '9pt' }}>\n          <a\n            onClick={() => {\n              axios.get(`${apiBaseUrl}/printpdf/bills/${bill.billId}`, {\n                responseType: 'blob', // important\n                headers: { 'schoolman_token': getCookieFromBrowser(authCookieName) }\n              })\n                .then(res => {\n                  const url = window.URL.createObjectURL(new Blob([res.data]))\n                  const link = document.createElement('a')\n                  link.href = url\n                  link.setAttribute('download', `imit-bill-${bill.billId}.pdf`)\n                  document.body.appendChild(link)\n                  link.click()\n                })\n            }}\n            style={{ textDecoration: 'none', color: 'green', cursor: 'pointer' }}\n          >\n            Print Bill\n          </a>\n        </div>\n      </div>\n\n      <div style={{ color: '#808080', marginBottom: 5 }}>Payments</div>\n      {bill.payments.length > 0 ? \n        bill.payments.map(p => (\n          <div style={{ display: 'flex', padding: '5px 0px', borderTop: '1px solid #DFDFDF', color: '#808080', fontSize: '9pt' }}>\n            <div style={{ flexGrow: 1 }}>\n              Amount: <span style={{color: '#000000'}}>{currency(p.amount)}</span> &nbsp;\n              Date: <span style={{color: '#000000'}}>{p.date}</span>\n            </div>\n          </div>\n        )) :\n        <div style={{ padding: '10px 0px' }}>(No payment)</div>\n      }\n\n      <div style={{ color: '#808080', fontSize: '9pt', paddingTop: 5, marginTop: 10, textAlign: 'right' }}>\n        Total paid: <span style={{color: '#000000'}}>{currency(bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))}</span> &nbsp;\n        Remaining: <span style={{ color: 'orange' }}>{currency(Math.max(0, bill.amount - (bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))}</span>\n      </div>\n    </Paper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}