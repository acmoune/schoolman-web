{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { Paper, Typography } from '@material-ui/core';\nimport { currency } from '../lib/utilities';\nimport { apiServer } from '../app.config';\nexport default function Bill({\n  bill\n}) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount;\n\n  const statusColor = () => {\n    if (isPaid) return 'green';\n    return 'red';\n  };\n\n  return __jsx(Paper, {\n    style: {\n      padding: 10,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      paddingBottom: 5,\n      marginBottom: 10\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    color: \"secondary\"\n  }, bill.description), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, \"Fee type: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, bill.feeType), \" \\xA0 Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(bill.amount)), \" \\xA0 Status: \", __jsx(\"span\", {\n    style: {\n      color: statusColor()\n    }\n  }, isPaid ? 'Paid' : 'Not Paid'))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"a\", {\n    href: `${apiServer}/printpdf/bills/${bill.billId}`,\n    target: \"popup\",\n    onClick: () => {\n      window.open(`${apiServer}/printpdf/bills/${bill.billId}`, 'popup', 'status=1,width=600,height=600,scrollbars=1');\n      return false;\n    }\n  }, \"Print Bill\"))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginBottom: 5\n    }\n  }, \"Payments\"), bill.payments.length > 0 ? bill.payments.map(p => __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      padding: '5px 0px',\n      borderTop: '1px solid #DFDFDF',\n      color: '#808080',\n      fontSize: '9pt'\n    }\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    }\n  }, \"Amount: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, currency(p.amount)), \" \\xA0 Date: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, p.date)))) : __jsx(\"div\", {\n    style: {\n      padding: '10px 0px'\n    }\n  }, \"(No payment)\"), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '9pt',\n      paddingTop: 5,\n      marginTop: 10,\n      textAlign: 'right'\n    }\n  }, \"Total paid: \", __jsx(\"span\", {\n    style: {\n      color: '#000000'\n    }\n  }, bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0)), \" \\xA0 Remaining: \", __jsx(\"span\", {\n    style: {\n      color: 'orange'\n    }\n  }, currency(Math.max(0, bill.amount - bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))));\n}","map":{"version":3,"sources":["/data/apps/school-manager-client/components/Bill.tsx"],"names":["React","Paper","Typography","currency","apiServer","Bill","bill","isPaid","payments","reduce","s","p","amount","statusColor","padding","marginBottom","display","paddingBottom","flexGrow","description","color","fontSize","feeType","billId","window","open","length","map","borderTop","date","paddingTop","marginTop","textAlign","Math","max"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { IBill } from '../server/src/models/accounts/Enrollment'\nimport { Paper, Typography, Button } from '@material-ui/core'\nimport { currency } from '../lib/utilities'\nimport { apiServer } from '../app.config'\n\nexport default function Bill({ bill }: { bill: IBill }) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount\n\n  const statusColor = () => {\n    if (isPaid) return 'green'\n    return 'red'\n  }\n\n  return (\n    <Paper style={{ padding: 10, marginBottom: 10 }}>\n      <div style={{ display: 'flex', paddingBottom: 5, marginBottom: 10 }}>\n        <div style={{ flexGrow: 1 }}>\n          <Typography variant=\"body1\" color=\"secondary\">{bill.description}</Typography>\n\n          <div style={{ color: '#808080', fontSize: '9pt' }}>\n            Fee type: <span style={{color: '#000000'}}>{bill.feeType}</span> &nbsp;\n            Amount: <span style={{color: '#000000'}}>{currency(bill.amount)}</span> &nbsp;\n            Status: <span style={{ color: statusColor() }}>{isPaid ? 'Paid' : 'Not Paid'}</span>\n          </div>\n        </div>\n\n        <div style={{ color: '#808080', fontSize: '9pt' }}>\n          <a\n            href={`${apiServer}/printpdf/bills/${bill.billId}`}\n            target=\"popup\"\n            onClick={() => {\n              window.open(`${apiServer}/printpdf/bills/${bill.billId}`,'popup','status=1,width=600,height=600,scrollbars=1');\n              return false;\n            }}\n          >\n            Print Bill\n          </a>\n        </div>\n      </div>\n\n      <div style={{ color: '#808080', marginBottom: 5 }}>Payments</div>\n      {bill.payments.length > 0 ? \n        bill.payments.map(p => (\n          <div style={{ display: 'flex', padding: '5px 0px', borderTop: '1px solid #DFDFDF', color: '#808080', fontSize: '9pt' }}>\n            <div style={{ flexGrow: 1 }}>\n              Amount: <span style={{color: '#000000'}}>{currency(p.amount)}</span> &nbsp;\n              Date: <span style={{color: '#000000'}}>{p.date}</span>\n            </div>\n          </div>\n        )) :\n        <div style={{ padding: '10px 0px' }}>(No payment)</div>\n      }\n\n      <div style={{ color: '#808080', fontSize: '9pt', paddingTop: 5, marginTop: 10, textAlign: 'right' }}>\n        Total paid: <span style={{color: '#000000'}}>{bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0)}</span> &nbsp;\n        Remaining: <span style={{ color: 'orange' }}>{currency(Math.max(0, bill.amount - (bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))}</span>\n      </div>\n    </Paper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}