{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation createProfile($accountId: ID!, $data: ProfileDataInput!) {\\n    createProfile(accountId: $accountId, data: $data) {\\n      id birthDate birthPlace residence phoneNumber nationality\\n      nicNumber nicDateOfIssue nicPlaceOfIssue\\n      highestAcademicQualification yearOfIssue englishGradeInGCEOL mathematicsGradeInGCEOL\\n      professionalQualification employmentStatus jobTitle yearsOfExperience employerName employerAddress\\n      otherDetails\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport MainLayout from '../layouts/MainLayout';\nimport ProfileForm from '../components/ProfileForm';\nimport { useAuth } from '../components/AuthContext';\nimport Container from '../components/Container';\nimport { Typography } from '@material-ui/core';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Alert from '../components/Alert';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nimport { baseUrl } from '../app.config';\nvar CREATE_PROFILE_MUTATION = gql(_templateObject());\n\nfunction CreateProfile() {\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var _useMutation = useMutation(CREATE_PROFILE_MUTATION),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createProfile = _useMutation2[0],\n      _ = _useMutation2[1];\n\n  var _useState = useState({\n    open: false,\n    level: 'info',\n    message: ''\n  }),\n      alertOptions = _useState[0],\n      setAlertOptions = _useState[1];\n\n  return __jsx(MainLayout, {\n    title: \"Create Profile\"\n  }, currentUser && __jsx(Container, {\n    maxWidth: 600\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center',\n      paddingBottom: 15\n    }\n  }, \"Create Profile\"), __jsx(ProfileForm, {\n    onSubmit: function onSubmit(data) {\n      createProfile({\n        variables: {\n          accountId: currentUser.id,\n          data: data\n        }\n      }).then(function () {\n        return window.location.href = baseUrl + '/myProfile';\n      })[\"catch\"](function (err) {\n        return setAlertOptions({\n          open: true,\n          level: 'error',\n          message: err.message\n        });\n      });\n    }\n  }), __jsx(Alert, {\n    level: alertOptions.level,\n    message: alertOptions.message,\n    open: alertOptions.open,\n    onClose: function onClose() {\n      return setAlertOptions({\n        open: false,\n        level: alertOptions.level,\n        message: alertOptions.message\n      });\n    }\n  }))));\n}\n\nCreateProfile.getInitialProps = function () {\n  return {\n    authRequired: true\n  };\n};\n\nexport default withApollo(withAuth(CreateProfile));","map":null,"metadata":{},"sourceType":"module"}