{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport MainLayout from '../layouts/MainLayout';\nimport { useAuth } from '../components/AuthContext';\nimport Container from '../components/Container';\nimport { gql } from 'apollo-boost';\nimport { Paper, Typography, Button } from '@material-ui/core';\nimport Router from 'next/router';\nimport ProfileView from '../components/ProfileView';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nimport Link from 'next/link';\nconst GET_PROFILE_QUERY = gql`\n  query getProfile($email: String!) {\n    account(email: $email) {\n      id\n      email\n      fullName\n      profile {\n        id birthDate birthPlace residence phoneNumber nationality otherDetails\n      }\n    }\n  }\n`;\n\nfunction MyProfile({\n  profile\n}) {\n  const {\n    currentUser\n  } = useAuth();\n  return __jsx(MainLayout, {\n    title: `${currentUser ? currentUser.fullName : 'My Profile'}`\n  }, __jsx(Container, null, currentUser && __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(Paper, {\n    style: {\n      padding: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"secondary\"\n  }, currentUser.fullName), __jsx(Typography, {\n    variant: \"h6\",\n    color: \"textSecondary\"\n  }, currentUser.email), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      fontSize: '8pt',\n      marginTop: 5\n    }\n  }, \"If there is a mistake in your name or if you want to update your email, please contact an administrator\")), profile ? __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      marginBottom: 15,\n      paddingBottom: 10,\n      borderBottom: '1px solid #DFDFDF'\n    }\n  }, __jsx(Typography, {\n    variant: \"h6\",\n    color: \"textSecondary\",\n    style: {\n      flexGrow: 1\n    }\n  }, \"My Profile\"), __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: () => Router.push('/editProfile')\n  }, \"Edit\")), __jsx(ProfileView, {\n    profile: profile\n  })) : __jsx(\"div\", {\n    style: {\n      padding: 40,\n      textAlign: 'center'\n    }\n  }, \"You do not have a profile yet. \\xA0\", __jsx(Link, {\n    href: \"/createProfile\"\n  }, __jsx(\"a\", {\n    style: {\n      textDecoration: 'none'\n    }\n  }, \"Create Profile\"))))));\n}\n\nMyProfile.getInitialProps = async ({\n  apolloClient,\n  token,\n  currentUser\n}) => {\n  var profile = null;\n\n  if (currentUser) {\n    const {\n      data: {\n        account\n      }\n    } = await apolloClient.query({\n      query: GET_PROFILE_QUERY,\n      variables: {\n        email: currentUser.email\n      },\n      context: {\n        headers: {\n          'schoolman_token': token\n        }\n      }\n    });\n    profile = account.profile;\n  }\n\n  return {\n    profile,\n    authRequired: true\n  };\n};\n\nexport default withApollo(withAuth(MyProfile));","map":null,"metadata":{},"sourceType":"module"}