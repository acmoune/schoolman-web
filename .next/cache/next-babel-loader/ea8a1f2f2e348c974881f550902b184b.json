{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport MainLayout from '../layouts/MainLayout';\nimport ProfileForm from '../components/ProfileForm';\nimport { useAuth } from '../components/AuthContext';\nimport Container from '../components/Container';\nimport { Typography } from '@material-ui/core';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Alert from '../components/Alert';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nimport { baseUrl } from '../app.config';\nconst CREATE_PROFILE_MUTATION = gql`\n  mutation createProfile($accountId: ID!, $data: ProfileDataInput!) {\n    createProfile(accountId: $accountId, data: $data) {\n      id birthDate birthPlace residence phoneNumber nationality\n      nicNumber nicDateOfIssue nicPlaceOfIssue\n      highestAcademicQualification yearOfIssue englishGradeInGCEOL mathematicsGradeInGCEOL\n      professionalQualification employmentStatus jobTitle yearsOfExperience employerName employerAddress\n      otherDetails\n    }\n  }\n`;\n\nfunction CreateProfile() {\n  const {\n    currentUser\n  } = useAuth();\n  const [createProfile, _] = useMutation(CREATE_PROFILE_MUTATION);\n  const {\n    0: alertOptions,\n    1: setAlertOptions\n  } = useState({\n    open: false,\n    level: 'info',\n    message: ''\n  });\n  return __jsx(MainLayout, {\n    title: \"Create Profile\"\n  }, currentUser && __jsx(Container, {\n    maxWidth: 600\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center',\n      paddingBottom: 15\n    }\n  }, \"Create Profile\"), __jsx(ProfileForm, {\n    onSubmit: data => {\n      createProfile({\n        variables: {\n          accountId: currentUser.id,\n          data\n        }\n      }).then(() => window.location.href = baseUrl + '/myProfile').catch(err => setAlertOptions({\n        open: true,\n        level: 'error',\n        message: err.message\n      }));\n    }\n  }), __jsx(Alert, {\n    level: alertOptions.level,\n    message: alertOptions.message,\n    open: alertOptions.open,\n    onClose: () => setAlertOptions({\n      open: false,\n      level: alertOptions.level,\n      message: alertOptions.message\n    })\n  }))));\n}\n\nCreateProfile.getInitialProps = () => ({\n  authRequired: true\n});\n\nexport default withApollo(withAuth(CreateProfile));","map":null,"metadata":{},"sourceType":"module"}