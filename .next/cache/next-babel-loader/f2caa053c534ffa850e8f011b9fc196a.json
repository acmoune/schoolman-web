{"ast":null,"code":"var _jsxFileName = \"/data/apps/school-manager-client/pages/training.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { gql } from 'apollo-boost';\nimport { apiServer } from '../app.config';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nimport { Paper, Typography, Grid, Table, TableHead, TableBody, TableRow, TableCell, ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Button } from '@material-ui/core';\nimport Container from '../components/Container';\nimport MainLayout from '../layouts/MainLayout';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport { ProgramMini } from '../components/catalog/DepList';\n\nfunction Units(props) {\n  const classes = makeStyles(theme => createStyles({\n    root: {\n      marginTop: 10,\n      padding: 15\n    },\n    heading: {\n      //fontSize: theme.typography.pxToRem(15),\n      fontSize: '12pt',\n      color: '#808080',\n      fontWeight: 'bold',\n      flexGrow: 1\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    }\n  }))();\n  const [currPanelId, setCurrPanelId] = React.useState(-1);\n\n  const handleChange = id => event => {\n    if (id === currPanelId) setCurrPanelId(-1);else setCurrPanelId(id);\n  };\n\n  return __jsx(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      fontSize: '11pt',\n      fontWeight: 'bold',\n      color: '#248857',\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Units\"), props.units.length > 0 ? props.units.map(u => __jsx(ExpansionPanel, {\n    expanded: currPanelId === u.id,\n    onChange: handleChange(u.id),\n    key: u.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(ExpansionPanelSummary, {\n    expandIcon: __jsx(ExpandMoreIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }),\n    \"aria-controls\": `panel${u.id}`,\n    id: `panel${u.id}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, __jsx(Typography, {\n    className: classes.heading,\n    variant: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, u.title), __jsx(Typography, {\n    className: classes.secondaryHeading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, u.optional ? 'Optional' : 'Required')), __jsx(ExpansionPanelDetails, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      flexGrow: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: u.syllabus\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }))))) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"No Units\"));\n}\n\nfunction Plan(props) {\n  const router = useRouter();\n  return __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(Paper, {\n    style: {\n      padding: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, props.plan.title)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"caption\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, props.plan.description)), __jsx(Paper, {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    key: \"duration\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      fontWeight: 'bold',\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"Duration\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, props.plan.duration))))), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginTop: 15,\n      fontSize: '11pt',\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Fees\"), props.plan.fees.length > 0 ? __jsx(Paper, {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, __jsx(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Description\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Type\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"Amount\"))), __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, props.plan.fees.map(f => __jsx(TableRow, {\n    key: f.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, f.description, \" \", f.optional && __jsx(\"span\", {\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"(Optional)\")), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, f.feeType), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, f.promotionalAmount > 0 ? __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    style: {\n      textDecoration: 'line-through'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, f.amount), \" \\xA0\", __jsx(\"span\", {\n    style: {\n      color: 'orange'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, f.promotionalAmount)) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, f.amount))))))) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"No fees\"), __jsx(\"div\", {\n    style: {\n      color: '#808080',\n      marginTop: 15,\n      fontSize: '11pt',\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Current Sessions\"), props.plan.currentSessions.length > 0 ? __jsx(Paper, {\n    style: {\n      marginTop: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, __jsx(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, __jsx(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"Title\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Start date\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"Status\"), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }))), __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, props.plan.currentSessions.map(s => __jsx(TableRow, {\n    key: s.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, s.title), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, s.startDate), __jsx(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, s.status), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"secondary\",\n    size: \"small\",\n    onClick: () => router.push({\n      pathname: '/application',\n      query: {\n        tsId: s.id\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Apply\"))))))) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, \"There is no new session right now, we should schedule one shortly, please check again later\")));\n}\n\nfunction Plans(props) {\n  const classes = makeStyles(theme => createStyles({\n    root: {\n      marginTop: 10,\n      padding: 15\n    },\n    planItem: {\n      fontSize: '11pt',\n      fontWeight: 'bold',\n      color: '#808080',\n      cursor: 'pointer',\n      padding: 5,\n      borderRadius: 3\n    },\n    selectedPlanItem: {\n      backgroundColor: '#DFDFDF'\n    }\n  }))();\n  const [currentPlanId, setCurrentPlanId] = React.useState(props.plans.length > 0 ? 0 : -1);\n\n  const handleClick = id => event => setCurrentPlanId(id);\n\n  return __jsx(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      fontSize: '11pt',\n      fontWeight: 'bold',\n      color: '#248857',\n      borderBottom: '1px solid #DFDFDF',\n      paddingBottom: 5,\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"Plans\"), __jsx(Grid, {\n    container: true,\n    spacing: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, props.plans.map((p, i) => __jsx(\"div\", {\n    key: p.id,\n    className: `${classes.planItem} ${i === currentPlanId ? classes.selectedPlanItem : ''}`,\n    onClick: handleClick(i),\n    style: {\n      position: 'relative',\n      paddingRight: 22\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, p.title, p.currentSessions.length > 0 && __jsx(\"span\", {\n    style: {\n      fontSize: '8pt',\n      width: 16,\n      height: 16,\n      textAlign: 'center',\n      borderRadius: '50%',\n      backgroundColor: '#444444',\n      color: 'white',\n      position: 'absolute',\n      right: 5,\n      top: 7,\n      display: 'inline-block'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, p.currentSessions.length)))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, currentPlanId !== -1 ? __jsx(Plan, {\n    plan: props.plans[currentPlanId],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }) : __jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, \"No plan selected\"))));\n}\n\nconst GET_ONE_TRAINING_QUERY = gql`\n  query getTrainingById($trainingId: ID!) {\n    training(trainingId: $trainingId) {\n      id\n      title\n      description\n      banner\n      link\n      requiredOptionalUnits\n      prerequisites\n      qualifications\n      units { id title syllabus optional }\n      plans {\n        id\n        title\n        description\n        duration\n        fees { id description feeType amount promotionalAmount optional }\n        currentSessions {\n          id\n          title\n          startDate\n          status\n          fees { id description feeType amount promotionalAmount optional }\n        }\n      }\n      program {id title logo }\n    }\n  }\n`;\n\nfunction TrainingPage(props) {\n  const t = props.training;\n  const banner = t.banner ? `${apiServer}/assets/images/${t.banner}` : `${apiServer}/assets/images/trainings/no-banner.jpg`;\n  return __jsx(MainLayout, {\n    title: \"IMIT\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291\n    },\n    __self: this\n  }, __jsx(Paper, {\n    style: {\n      borderRadius: 0,\n      marginTop: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: {\n      pathname: \"/program\",\n      query: {\n        programId: t.program.id\n      }\n    },\n    passHref: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293\n    },\n    __self: this\n  }, __jsx(ProgramMini, {\n    program: t.program,\n    style: {\n      marginBottom: 0,\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }))), __jsx(\"img\", {\n    src: banner,\n    alt: \"\",\n    style: {\n      width: '100%',\n      marginTop: 0\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298\n    },\n    __self: this\n  }), __jsx(Paper, {\n    style: {\n      padding: 15,\n      marginTop: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, t.title)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, __jsx(Typography, {\n    variant: \"caption\",\n    style: {\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, t.description)), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306\n    },\n    __self: this\n  }, t.link ? __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: t.link,\n    style: {\n      textDecoration: 'none',\n      fontSize: '8pt',\n      color: '#339967'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  }, \"Official  vendor link\")) : null), __jsx(Paper, {\n    style: {\n      marginTop: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317\n    },\n    __self: this\n  }, __jsx(Table, {\n    size: \"small\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, __jsx(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319\n    },\n    __self: this\n  }, t.prerequisites && __jsx(TableRow, {\n    key: t.prerequisites,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      fontWeight: 'bold',\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, \"Prerequisites\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }, t.prerequisites)), t.qualifications && __jsx(TableRow, {\n    key: t.qualifications,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      fontWeight: 'bold',\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329\n    },\n    __self: this\n  }, \"Qualifications\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330\n    },\n    __self: this\n  }, t.qualifications)), __jsx(TableRow, {\n    key: \"reqNum\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, __jsx(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    style: {\n      fontWeight: 'bold',\n      color: '#808080'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }, \"Required number of optional units\"), __jsx(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336\n    },\n    __self: this\n  }, t.requiredOptionalUnits || 0)))))), __jsx(Plans, {\n    plans: t.plans,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343\n    },\n    __self: this\n  }), __jsx(Units, {\n    units: t.units,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344\n    },\n    __self: this\n  })));\n}\n\nTrainingPage.getInitialProps = async ({\n  query,\n  apolloClient,\n  token\n}) => {\n  const {\n    data: {\n      training\n    }\n  } = await apolloClient.query({\n    query: GET_ONE_TRAINING_QUERY,\n    variables: {\n      trainingId: query.trainingId\n    },\n    context: {\n      headers: {\n        'schoolman_token': token\n      }\n    }\n  });\n  return {\n    training,\n    authRequired: false\n  };\n};\n\nexport default withApollo(withAuth(TrainingPage));","map":{"version":3,"sources":["/data/apps/school-manager-client/pages/training.tsx"],"names":["React","Link","useRouter","gql","apiServer","withApollo","withAuth","Paper","Typography","Grid","Table","TableHead","TableBody","TableRow","TableCell","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","Button","Container","MainLayout","ExpandMoreIcon","makeStyles","createStyles","ProgramMini","Units","props","classes","theme","root","marginTop","padding","heading","fontSize","color","fontWeight","flexGrow","secondaryHeading","typography","pxToRem","palette","text","secondary","currPanelId","setCurrPanelId","useState","handleChange","id","event","marginBottom","units","length","map","u","title","optional","__html","syllabus","Plan","router","plan","description","duration","fees","f","feeType","promotionalAmount","textDecoration","amount","currentSessions","s","startDate","status","push","pathname","query","tsId","Plans","planItem","cursor","borderRadius","selectedPlanItem","backgroundColor","currentPlanId","setCurrentPlanId","plans","handleClick","borderBottom","paddingBottom","p","i","position","paddingRight","width","height","textAlign","right","top","display","GET_ONE_TRAINING_QUERY","TrainingPage","t","training","banner","programId","program","link","prerequisites","qualifications","requiredOptionalUnits","getInitialProps","apolloClient","token","data","variables","trainingId","context","headers","authRequired"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Link from 'next/link'\nimport {useRouter} from 'next/router'\nimport { gql } from 'apollo-boost'\nimport { apiServer } from '../app.config'\nimport withApollo from '../lib/with-apollo'\nimport withAuth from '../lib/with-auth'\n\nimport {\n  Paper,\n  Typography,\n  Grid,\n  Table,\n  TableHead,\n  TableBody,\n  TableRow,\n  TableCell,\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  Button\n} from '@material-ui/core'\nimport Container from '../components/Container'\nimport MainLayout from '../layouts/MainLayout'\nimport ITraining from '../server/src/models/catalog/Training'\nimport ITrainingUnit from '../server/src/models/catalog/TrainingUnit'\nimport ITrainingPlan from '../server/src/models/catalog/TrainingPlan'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\nimport {ProgramMini} from '../components/catalog/DepList'\n\nfunction Units(props: { units: ITrainingUnit[] }) {\n  const classes = makeStyles((theme: Theme) => createStyles({\n    root: { marginTop: 10, padding: 15 },\n    heading: {\n      //fontSize: theme.typography.pxToRem(15),\n      fontSize: '12pt',\n      color: '#808080',\n      fontWeight: 'bold',\n      flexGrow: 1\n    },\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    }\n  }))()\n\n  const [currPanelId, setCurrPanelId] = React.useState<number>(-1)\n  const handleChange = (id: number) => (event: React.ChangeEvent<{}>) => {\n    if (id === currPanelId) setCurrPanelId(-1)\n    else setCurrPanelId(id)\n  }\n  \n  return (\n    <Paper className={classes.root}>\n      <div \n        style={{\n          fontSize: '11pt', \n          fontWeight: 'bold', \n          color: '#248857', \n          marginBottom: 10\n        }}\n      >\n        Units\n      </div>\n\n      {props.units.length > 0 ? \n        props.units.map(u =>\n          <ExpansionPanel expanded={currPanelId === u.id} onChange={handleChange(u.id)} key={u.id}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />} aria-controls={`panel${u.id}`} id={`panel${u.id}`}>\n              <Typography className={classes.heading} variant=\"inherit\">{u.title}</Typography>\n              <Typography className={classes.secondaryHeading}>{u.optional ? 'Optional' : 'Required'}</Typography>\n            </ExpansionPanelSummary>\n\n            <ExpansionPanelDetails>\n              <div style={{ flexGrow: 1 }}>\n                <div dangerouslySetInnerHTML={{ __html: u.syllabus }} />\n              </div>\n            </ExpansionPanelDetails>\n          </ExpansionPanel>\n        ) :\n        <span>No Units</span>\n      }\n    </Paper>\n  )\n}\n\nfunction Plan(props: { plan: ITrainingPlan }) {\n  const router = useRouter()\n\n  return (\n    <div>\n      <Paper style={{ padding: 15 }}>\n        <div><Typography variant=\"h5\">{props.plan.title}</Typography></div>\n        <div>\n          <Typography variant=\"caption\" style={{ color: '#808080' }}>{props.plan.description}</Typography>\n        </div>\n\n        <Paper style={{ marginTop: 10 }}>\n          <Table size=\"small\">\n            <TableBody>\n              <TableRow key=\"duration\">\n                <TableCell component=\"th\" scope=\"row\" style={{ fontWeight: 'bold', color: '#808080' }}>Duration</TableCell>\n                <TableCell align=\"right\">{props.plan.duration}</TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </Paper>\n\n        <div style={{color: '#808080', marginTop: 15, fontSize: '11pt', fontWeight: 'bold'}}>Fees</div>\n\n        {props.plan.fees.length > 0 ?\n          <Paper style={{ marginTop: 10 }}>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Description</TableCell>\n                  <TableCell>Type</TableCell>\n                  <TableCell align=\"right\">Amount</TableCell>\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {props.plan.fees.map(f => (\n                  <TableRow key={f.id}>\n                    <TableCell>{f.description} {f.optional && <span style={{color: '#808080'}}>(Optional)</span>}</TableCell>\n                    <TableCell>{f.feeType}</TableCell>\n                    <TableCell align=\"right\">\n                      {f.promotionalAmount > 0 ?\n                        <div>\n                          <span style={{textDecoration: 'line-through'}}>{f.amount}</span> &nbsp;\n                          <span style={{color: 'orange'}}>{f.promotionalAmount}</span>\n                        </div> :\n                        <span>{f.amount}</span>\n                      }\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper> :\n          <span>No fees</span>\n        }\n\n        <div style={{color: '#808080', marginTop: 15, fontSize: '11pt', fontWeight: 'bold'}}>Current Sessions</div>\n\n        {props.plan.currentSessions.length > 0 ?\n          <Paper style={{ marginTop: 10 }}>\n            <Table size=\"small\">\n              <TableHead>\n                <TableRow>\n                  <TableCell>Title</TableCell>\n                  <TableCell  align=\"right\">Start date</TableCell>\n                  <TableCell>Status</TableCell>\n                  <TableCell />\n                </TableRow>\n              </TableHead>\n\n              <TableBody>\n                {props.plan.currentSessions.map(s => (\n                  <TableRow key={s.id}>\n                    <TableCell>{s.title}</TableCell>\n                    <TableCell align=\"right\">{s.startDate}</TableCell>\n                    <TableCell>{s.status}</TableCell>\n                    <TableCell align=\"right\">\n                      <Button \n                        variant=\"contained\" \n                        color=\"secondary\" \n                        size=\"small\"\n                        onClick={() => router.push({ pathname: '/application', query: { tsId: s.id } })}\n                      >\n                        Apply\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper> :\n          <span>There is no new session right now, we should schedule one shortly, please check again later</span>\n        }\n      </Paper>\n    </div>\n  )\n}\n\nfunction Plans(props: { plans: ITrainingPlan[] }) {\n  const classes = makeStyles((theme: Theme) => createStyles({\n    root: { marginTop: 10, padding: 15 },\n    planItem: {\n      fontSize: '11pt',\n      fontWeight: 'bold',\n      color: '#808080',\n      cursor: 'pointer',\n      padding: 5,\n      borderRadius: 3\n    },\n    selectedPlanItem: {backgroundColor: '#DFDFDF'}\n  }))()\n\n  const [currentPlanId, setCurrentPlanId] = React.useState<number>(props.plans.length > 0 ? 0 : -1)\n  const handleClick = (id: number) => (event: React.ChangeEvent<{}>) =>\n    setCurrentPlanId(id)\n\n  return (\n    <Paper className={classes.root}>\n      <div \n        style={{\n          fontSize: '11pt', \n          fontWeight: 'bold', \n          color: '#248857', \n          borderBottom: '1px solid #DFDFDF',\n          paddingBottom: 5,\n          marginBottom: 10\n        }}\n      >\n        Plans\n      </div>\n\n      <Grid container spacing={2}>\n        <Grid item xs={12} md={4}>\n          {props.plans.map((p, i) => (\n            <div\n              key={p.id}\n              className={`${classes.planItem} ${i === currentPlanId ? classes.selectedPlanItem : ''}`}\n              onClick={handleClick(i)}\n              style={{position: 'relative', paddingRight: 22}}\n            >\n              {p.title}\n              \n              {p.currentSessions.length > 0  && (\n                <span style={{fontSize: '8pt', width: 16, height: 16, textAlign: 'center', borderRadius: '50%', backgroundColor: '#444444', color: 'white', position: 'absolute', right: 5, top: 7, display: 'inline-block'}}>\n                  {p.currentSessions.length}\n                </span>\n              )}\n            </div>\n          ))}\n        </Grid>\n\n        <Grid item xs={12} md={8}>\n          {(currentPlanId !== -1) ? \n            <Plan plan={props.plans[currentPlanId]} /> : \n            <span>No plan selected</span>\n          }\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n}\n\nconst GET_ONE_TRAINING_QUERY = gql`\n  query getTrainingById($trainingId: ID!) {\n    training(trainingId: $trainingId) {\n      id\n      title\n      description\n      banner\n      link\n      requiredOptionalUnits\n      prerequisites\n      qualifications\n      units { id title syllabus optional }\n      plans {\n        id\n        title\n        description\n        duration\n        fees { id description feeType amount promotionalAmount optional }\n        currentSessions {\n          id\n          title\n          startDate\n          status\n          fees { id description feeType amount promotionalAmount optional }\n        }\n      }\n      program {id title logo }\n    }\n  }\n`\n\nfunction TrainingPage(props: { training: ITraining }) {\n\n  const t: ITraining = props.training\n  const banner = t.banner ? \n    `${apiServer}/assets/images/${t.banner}` : \n    `${apiServer}/assets/images/trainings/no-banner.jpg`\n\n  return (\n    <MainLayout title=\"IMIT\">\n      <Container>\n        <Paper style={{borderRadius: 0, marginTop: 15}}>\n          <Link href={{ pathname: \"/program\", query: {programId: t.program.id} }} passHref>\n            <ProgramMini program={t.program} style={{ marginBottom: 0, fontWeight: 'bold' }} />\n          </Link>\n        </Paper>\n\n        <img src={banner} alt=\"\" style={{width: '100%', marginTop: 0}} />\n\n        <Paper style={{ padding: 15, marginTop: 5 }}>\n          <div><Typography variant=\"h5\">{t.title}</Typography></div>\n          <div>\n            <Typography variant=\"caption\" style={{ color: '#808080' }}>{t.description}</Typography>\n          </div>\n\n          <div>\n            {t.link ? \n              <div>\n                <a href={t.link} style={{textDecoration: 'none', fontSize: '8pt', color: '#339967'}}>\n                  Official  vendor link\n                </a>\n              </div> : \n              null\n            }\n          </div>\n\n          <Paper style={{ marginTop: 15 }}>\n            <Table size=\"small\">\n              <TableBody>\n                {t.prerequisites && (\n                  <TableRow key={t.prerequisites}>\n                    <TableCell component=\"th\" scope=\"row\" style={{ fontWeight: 'bold', color: '#808080' }}>Prerequisites</TableCell>\n                    <TableCell align=\"right\">{t.prerequisites}</TableCell>\n                  </TableRow>\n                )}\n\n                {t.qualifications && (\n                  <TableRow key={t.qualifications}>\n                    <TableCell component=\"th\" scope=\"row\" style={{ fontWeight: 'bold', color: '#808080' }}>Qualifications</TableCell>\n                    <TableCell align=\"right\">{t.qualifications}</TableCell>\n                  </TableRow>\n                )}\n\n                <TableRow key=\"reqNum\">\n                  <TableCell component=\"th\" scope=\"row\" style={{ fontWeight: 'bold', color: '#808080' }}>Required number of optional units</TableCell>\n                  <TableCell align=\"right\">{t.requiredOptionalUnits || 0}</TableCell>\n                </TableRow>\n              </TableBody>\n            </Table>\n          </Paper>\n        </Paper>\n\n        <Plans plans={t.plans} />\n        <Units units={t.units} />\n      </Container>\n    </MainLayout>\n  )\n}\n\nTrainingPage.getInitialProps = async ({ query, apolloClient, token }: any) => {\n  const { data: { training }} = await apolloClient.query({\n    query: GET_ONE_TRAINING_QUERY,\n    variables: { trainingId: query.trainingId },\n    context: { headers: { 'schoolman_token': token } }\n  })\n\n  return ({ training, authRequired: false })\n}\n\nexport default withApollo(withAuth(TrainingPage))\n"]},"metadata":{},"sourceType":"module"}