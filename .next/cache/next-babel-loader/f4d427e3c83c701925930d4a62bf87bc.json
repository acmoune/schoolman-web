{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport MainLayout from '../layouts/MainLayout';\nimport ProfileForm from '../components/ProfileForm';\nimport { useAuth } from '../components/AuthContext';\nimport Container from '../components/Container';\nimport { Typography } from '@material-ui/core';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport Router from 'next/router';\nimport Alert from '../components/Alert';\nimport withApollo from '../lib/with-apollo';\nimport withAuth from '../lib/with-auth';\nconst UPDATE_PROFILE_MUTATION = gql`\n  mutation updateProfile($accountId: ID!, $profileId: ID!, $data: ProfileDataInput!) {\n    updateProfile(accountId: $accountId, profileId: $profileId, data: $data) {\n      id birthDate birthPlace residence phoneNumber nationality\n      nicNumber nicDateOfIssue nicPlaceOfIssue\n      highestAcademicQualification yearOfIssue englishGradeInGCEOL mathematicsGradeInGCEOL\n      professionalQualification employmentStatus jobTitle yearsOfExperience employerName employerAddress\n      otherDetails\n    }\n  }\n`;\n\nfunction EditProfile() {\n  const {\n    currentUser\n  } = useAuth();\n  const [updateProfile, _] = useMutation(UPDATE_PROFILE_MUTATION);\n  const {\n    0: alertOptions,\n    1: setAlertOptions\n  } = useState({\n    open: false,\n    level: 'info',\n    message: ''\n  });\n  return __jsx(MainLayout, {\n    title: \"Edit Profile\"\n  }, currentUser && __jsx(Container, {\n    maxWidth: 600\n  }, __jsx(\"div\", {\n    style: {\n      marginTop: 15\n    }\n  }, __jsx(Typography, {\n    variant: \"h5\",\n    color: \"textSecondary\",\n    style: {\n      textAlign: 'center',\n      paddingBottom: 15\n    }\n  }, \"Edit Profile\"), __jsx(ProfileForm, {\n    profile: currentUser.profile,\n    onSubmit: data => {\n      console.log(data);\n      updateProfile({\n        variables: {\n          accountId: currentUser.id,\n          profileId: currentUser.profile.id,\n          data\n        }\n      }).then(() => Router.push('/myProfile')).catch(err => setAlertOptions({\n        open: true,\n        level: 'error',\n        message: err.message\n      }));\n    }\n  }), __jsx(Alert, {\n    level: alertOptions.level,\n    message: alertOptions.message,\n    open: alertOptions.open,\n    onClose: () => setAlertOptions({\n      open: false,\n      level: alertOptions.level,\n      message: alertOptions.message\n    })\n  }))));\n}\n\nEditProfile.getInitialProps = () => ({\n  authRequired: true\n});\n\nexport default withApollo(withAuth(EditProfile));","map":null,"metadata":{},"sourceType":"module"}