{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{\"1rew\":function(n,t,e){\"use strict\";e.r(t);var o=e(\"ln6h\"),r=e.n(o),a=e(\"rt45\"),l=e(\"q1tI\"),i=e.n(l),c=e(\"rbhw\"),s=e(\"LIIV\"),u=e(\"BMua\"),d=e(\"kKAo\"),m=e(\"ofer\"),p=i.a.createElement;function y(n){var t=n.enrollment;return p(d.a,{style:{padding:10,display:\"flex\",marginBottom:10}},p(\"div\",{style:{flexGrow:1}},p(m.a,{variant:\"h6\",color:\"secondary\"},t.trainingTitle),p(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},\"Program: \",p(\"span\",{style:{color:\"#000000\"}},t.programTitle),\" \\xa0 Plan: \",p(\"span\",{style:{color:\"#000000\"}},t.planTitle),\" \\xa0 Session: \",p(\"span\",{style:{color:\"#000000\"}},t.sessionTitle,\" (\",t.sessionStatus,\")\"))))}var f=i.a.createElement;function v(n){var t=n.enrollment,e=n.onSelect;return f(\"div\",{onClick:function(){return e()},style:{cursor:\"pointer\"}},f(y,{enrollment:t}))}var g=e(\"Z3vd\"),b=e(\"vDqi\"),h=e.n(b),w=e(\"lUOW\"),T=e(\"1heK\"),x=e(\"lIVI\"),I=i.a.createElement;function S(n){var t=n.bill,e=t.payments.reduce((function(n,t){return n+t.amount}),0)>=t.amount;return I(d.a,{style:{padding:10,marginBottom:10}},I(\"div\",{style:{display:\"flex\",paddingBottom:5,marginBottom:10}},I(\"div\",{style:{flexGrow:1}},I(m.a,{variant:\"body1\",color:\"secondary\"},t.description),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},\"Fee type: \",I(\"span\",{style:{color:\"#000000\"}},t.feeType),\" \\xa0 Amount: \",I(\"span\",{style:{color:\"#000000\"}},Object(w.a)(t.amount)),\" \\xa0 Status: \",I(\"span\",{style:{color:e?\"green\":\"red\"}},e?\"Paid\":\"Not Paid\"))),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},I(\"a\",{onClick:function(){h.a.get(\"\".concat(x.apiBaseUrl,\"/printpdf/bills/\").concat(t.billId),{responseType:\"blob\",headers:{schoolman_token:Object(T.a)(x.authCookieName)}}).then((function(n){var e=window.URL.createObjectURL(new Blob([n.data])),o=document.createElement(\"a\");o.href=e,o.setAttribute(\"download\",\"imit-bill-\".concat(t.billId,\".pdf\")),document.body.appendChild(o),o.click()}))},style:{textDecoration:\"none\",color:\"green\",cursor:\"pointer\"}},\"Print Bill\"))),I(\"div\",{style:{color:\"#808080\",marginBottom:5}},\"Payments\"),t.payments.length>0?t.payments.map((function(n){return I(\"div\",{style:{display:\"flex\",padding:\"5px 0px\",borderTop:\"1px solid #DFDFDF\",color:\"#808080\",fontSize:\"9pt\"}},I(\"div\",{style:{flexGrow:1}},\"Amount: \",I(\"span\",{style:{color:\"#000000\"}},Object(w.a)(n.amount)),\" \\xa0 Date: \",I(\"span\",{style:{color:\"#000000\"}},n.date)))})):I(\"div\",{style:{padding:\"10px 0px\"}},\"(No payment)\"),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\",paddingTop:5,marginTop:10,textAlign:\"right\"}},\"Total paid: \",I(\"span\",{style:{color:\"#000000\"}},Object(w.a)(t.payments.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0))),\" \\xa0 Remaining: \",I(\"span\",{style:{color:\"orange\"}},Object(w.a)(Math.max(0,t.amount-t.payments.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0))))))}var k=i.a.createElement;function B(n){var t=n.enrollment;return k(\"div\",null,k(y,{enrollment:t}),k(m.a,{variant:\"h6\",color:\"textSecondary\",style:{marginBottom:10}},\"Bills\"),t.bills.map((function(n){return k(S,{bill:n,key:n.billId})})))}var O=e(\"/muT\"),j=e(\"Dq7+\"),P=i.a.createElement;function C(){var n=Object(a.a)([\"\\n  query getMyTrainings($accountId: ID!) {\\n    enrollments(accountId: $accountId) {\\n      enrollmentId\\n      sessionTitle\\n      trainingTitle\\n      planTitle\\n      programTitle\\n      departmentTitle\\n      startDate\\n      duration\\n      sessionStatus\\n      bills {\\n        billId\\n        feeType\\n        description\\n        amount\\n        payments { paymentId amount date }\\n      }\\n    }\\n  }\\n\"]);return C=function(){return n},n}var D=Object(s.a)(C());function z(n){var t=n.enrollments,e=n.onSelect;return P(\"div\",{style:{marginTop:15}},P(m.a,{variant:\"h5\",color:\"textSecondary\",style:{marginBottom:10}},\"My Trainings\"),t.map((function(n){return P(v,{enrollment:n,onSelect:function(){return e(n)}})})))}function E(n){var t=n.enrollment,e=n.onBack,o=t.bills.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0),r=t.bills.flatMap((function(n){return n.payments.map((function(n){return n.amount}))})).reduce((function(n,t){return n+t}),0)<o;return P(\"div\",null,P(\"div\",{style:{marginTop:15,marginBottom:10,display:\"flex\",alignItems:\"center\"}},P(\"div\",null,P(g.a,{onClick:function(){return e()},size:\"small\",variant:\"text\"},\"Back to list\")),P(\"div\",{style:{flexGrow:1,fontSize:\"8pt\",color:\"#808080\",textAlign:\"right\",paddingRight:10}},r||\"Finished\"!==t.sessionStatus?\"You will be able to print your certificate when the training will be completed and if you do not owe money\":\"\"),P(\"div\",null,P(g.a,{onClick:function(){return e()},size:\"small\",disabled:r||\"Finished\"!==t.sessionStatus,variant:\"text\",color:\"secondary\"},\"Print Certificate Of Completion\"))),P(B,{enrollment:t}))}function F(n){var t=n.enrollments,e=Object(l.useState)(null),o=e[0],r=e[1];return P(c.a,{title:\"My Trainings - IMIT\"},P(u.a,null,o?P(E,{enrollment:o,onBack:function(){return r(null)}}):P(z,{enrollments:t,onSelect:function(n){return r(n)}})))}F.getInitialProps=function(n){var t,e,o,a,l;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=n.apolloClient,e=n.token,o=n.currentUser,i.next=3,r.a.awrap(t.query({query:D,variables:{accountId:o.id},context:{headers:{schoolman_token:e}}}));case 3:return a=i.sent,l=a.data.enrollments,i.abrupt(\"return\",{enrollments:l,authRequired:!0});case 6:case\"end\":return i.stop()}}))};t.default=Object(O.a)(Object(j.a)(F))},\"LR/m\":function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/myTrainings\",function(){return e(\"1rew\")}])},lUOW:function(n,t,e){\"use strict\";e.d(t,\"a\",(function(){return o}));e(\"pLtp\");var o=function(n){return\"XAF \"+Intl.NumberFormat().format(n)}}},[[\"LR/m\",1,0]]]);"}