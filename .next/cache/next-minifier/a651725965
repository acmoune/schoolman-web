{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{\"1rew\":function(n,t,e){\"use strict\";e.r(t);var r=e(\"ln6h\"),o=e.n(r),a=e(\"rt45\"),l=e(\"q1tI\"),i=e.n(l),c=e(\"rbhw\"),u=e(\"LIIV\"),s=e(\"BMua\"),m=e(\"kKAo\"),d=e(\"ofer\"),p=i.a.createElement;function y(n){var t=n.enrollment;return p(m.a,{style:{padding:10,display:\"flex\",marginBottom:10}},p(\"div\",{style:{flexGrow:1}},p(d.a,{variant:\"h6\",color:\"secondary\"},t.trainingTitle),p(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},\"Program: \",p(\"span\",{style:{color:\"#000000\"}},t.programTitle),\" \\xa0 Plan: \",p(\"span\",{style:{color:\"#000000\"}},t.planTitle),\" \\xa0 Session: \",p(\"span\",{style:{color:\"#000000\"}},t.sessionTitle,\" (\",t.sessionStatus,\")\"))))}var f=i.a.createElement;function v(n){var t=n.enrollment,e=n.onSelect;return f(\"div\",{onClick:function(){return e()},style:{cursor:\"pointer\"}},f(y,{enrollment:t}))}var b=e(\"Z3vd\"),g=e(\"vDqi\"),T=e.n(g),h=e(\"lUOW\"),w=e(\"1heK\"),x=e(\"lIVI\"),I=i.a.createElement;function B(n){var t=n.bill,e=t.payments.reduce((function(n,t){return n+t.amount}),0)>=t.amount;return I(m.a,{style:{padding:10,marginBottom:10}},I(\"div\",{style:{display:\"flex\",paddingBottom:5,marginBottom:10}},I(\"div\",{style:{flexGrow:1}},I(d.a,{variant:\"body1\",color:\"secondary\"},t.description),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},\"Fee type: \",I(\"span\",{style:{color:\"#000000\"}},t.feeType),\" \\xa0 Amount: \",I(\"span\",{style:{color:\"#000000\"}},Object(h.a)(t.amount)),\" \\xa0 Status: \",I(\"span\",{style:{color:e?\"green\":\"red\"}},e?\"Paid\":\"Not Paid\"))),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\"}},I(\"a\",{onClick:function(){T.a.get(\"\".concat(x.apiBaseUrl,\"/printpdf/bills/\").concat(t.billId),{responseType:\"blob\",headers:{schoolman_token:Object(w.a)(x.authCookieName)}}).then((function(n){var e=window.URL.createObjectURL(new Blob([n.data])),r=document.createElement(\"a\");r.href=e,r.setAttribute(\"download\",\"imit-bill-\".concat(t.billId,\".pdf\")),document.body.appendChild(r),r.click()}))},style:{textDecoration:\"none\",color:\"green\",cursor:\"pointer\"}},\"Print Bill\"))),I(\"div\",{style:{color:\"#808080\",marginBottom:5}},\"Payments\"),t.payments.length>0?t.payments.map((function(n){return I(\"div\",{style:{display:\"flex\",padding:\"5px 0px\",borderTop:\"1px solid #DFDFDF\",color:\"#808080\",fontSize:\"9pt\"}},I(\"div\",{style:{flexGrow:1}},\"Amount: \",I(\"span\",{style:{color:\"#000000\"}},Object(h.a)(n.amount)),\" \\xa0 Date: \",I(\"span\",{style:{color:\"#000000\"}},n.date)))})):I(\"div\",{style:{padding:\"10px 0px\"}},\"(No payment)\"),I(\"div\",{style:{color:\"#808080\",fontSize:\"9pt\",paddingTop:5,marginTop:10,textAlign:\"right\"}},\"Total paid: \",I(\"span\",{style:{color:\"#000000\"}},Object(h.a)(t.payments.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0))),\" \\xa0 Remaining: \",I(\"span\",{style:{color:\"orange\"}},Object(h.a)(Math.max(0,t.amount-t.payments.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0))))))}var S=i.a.createElement;function k(n){var t=n.enrollment;return S(\"div\",null,S(y,{enrollment:t}),S(d.a,{variant:\"h6\",color:\"textSecondary\",style:{marginBottom:10}},\"Bills\"),t.bills.map((function(n){return S(B,{bill:n,key:n.billId})})))}var O=e(\"/muT\"),j=e(\"Dq7+\"),D=i.a.createElement;function P(){var n=Object(a.a)([\"\\n  query getMyTrainings($accountId: ID!) {\\n    enrollments(accountId: $accountId) {\\n      enrollmentId\\n      sessionTitle\\n      trainingTitle\\n      planTitle\\n      programTitle\\n      departmentTitle\\n      startDate\\n      duration\\n      sessionStatus\\n      bills {\\n        billId\\n        feeType\\n        description\\n        amount\\n        payments { paymentId amount date }\\n      }\\n    }\\n  }\\n\"]);return P=function(){return n},n}var E=Object(u.a)(P());function _(n){var t=n.enrollments,e=n.onSelect;return D(\"div\",{style:{marginTop:15}},D(d.a,{variant:\"h5\",color:\"textSecondary\",style:{marginBottom:10}},\"My Training courses\"),t.map((function(n){return D(v,{enrollment:n,onSelect:function(){return e(n)}})})))}function q(n){var t=n.enrollment,e=n.onBack,r=t.bills.map((function(n){return n.amount})).reduce((function(n,t){return n+t}),0);t.bills.flatMap((function(n){return n.payments.map((function(n){return n.amount}))})).reduce((function(n,t){return n+t}),0);return D(\"div\",null,D(\"div\",{style:{marginTop:15,marginBottom:10,display:\"flex\",alignItems:\"center\"}},D(\"div\",null,D(b.a,{onClick:function(){return e()},size:\"small\",variant:\"text\"},\"Back to list\"))),D(k,{enrollment:t}))}function M(n){var t=n.enrollments,e=Object(l.useState)(null),r=e[0],o=e[1];return D(c.a,{title:\"My Training courses - IMIT\"},D(s.a,null,r?D(q,{enrollment:r,onBack:function(){return o(null)}}):D(_,{enrollments:t,onSelect:function(n){return o(n)}})))}M.getInitialProps=function(n){var t,e,r,a,l;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=n.apolloClient,e=n.token,r=n.currentUser,i.next=3,o.a.awrap(t.query({query:E,variables:{accountId:r.id},context:{headers:{schoolman_token:e}}}));case 3:return a=i.sent,l=a.data.enrollments,i.abrupt(\"return\",{enrollments:l,authRequired:!0});case 6:case\"end\":return i.stop()}}))};t.default=Object(O.a)(Object(j.a)(M))},\"LR/m\":function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/myTrainings\",function(){return e(\"1rew\")}])},lUOW:function(n,t,e){\"use strict\";e.d(t,\"a\",(function(){return r})),e.d(t,\"b\",(function(){return o}));e(\"pLtp\");var r=function(n){return\"XAF \"+Intl.NumberFormat().format(n)},o=function(n,t){return n.length<=t?n:n.substring(0,t-1)+\"...\"}}},[[\"LR/m\",1,0]]]);"}