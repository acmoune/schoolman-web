{"version":3,"file":"static/webpack/static/development/pages/myTrainings.js.1e1977583ce6937381fa.hot-update.js","sources":["webpack:///./components/Bill.tsx"],"sourcesContent":["import React from 'react'\nimport { IBill } from '../server/src/models/accounts/Enrollment'\nimport { Paper, Typography } from '@material-ui/core'\nimport axios from 'axios'\nimport { currency } from '../lib/utilities'\nimport { getCookieFromBrowser } from '../lib/cookie'\nimport { apiBaseUrl, authCookieName } from '../app.config'\n\nexport default function Bill({ bill }: { bill: IBill }) {\n  var isPaid = bill.payments.reduce((s, p) => s + p.amount, 0) >= bill.amount\n\n  const statusColor = () => {\n    if (isPaid) return 'green'\n    return 'red'\n  }\n\n  return (\n    <Paper style={{ padding: 10, marginBottom: 10 }}>\n      <div style={{ display: 'flex', paddingBottom: 5, marginBottom: 10 }}>\n        <div style={{ flexGrow: 1 }}>\n          <Typography variant=\"body1\" color=\"secondary\">{bill.description}</Typography>\n\n          <div style={{ color: '#808080', fontSize: '9pt' }}>\n            Fee type: <span style={{color: '#000000'}}>{bill.feeType}</span> &nbsp;\n            Amount: <span style={{color: '#000000'}}>{currency(bill.amount)}</span> &nbsp;\n            Status: <span style={{ color: statusColor() }}>{isPaid ? 'Paid' : 'Not Paid'}</span>\n          </div>\n        </div>\n\n        <div style={{ color: '#808080', fontSize: '9pt' }}>\n          <a\n            href=\"#\"\n            onClick={() => {\n              axios.get(`${apiBaseUrl}/printpdf/bills/${bill.billId}`, {\n                responseType: 'blob', // important\n                headers: { 'schoolman_token': getCookieFromBrowser(authCookieName) }\n              })\n                .then(res => {\n                  const url = window.URL.createObjectURL(new Blob([res.data]))\n                  const link = document.createElement('a')\n                  link.href = url\n                  link.setAttribute('download', `imit-bill-${bill.billId}.pdf`)\n                  document.body.appendChild(link)\n                  link.click()\n                })\n            }}\n          >\n            Print Bill\n          </a>\n        </div>\n      </div>\n\n      <div style={{ color: '#808080', marginBottom: 5 }}>Payments</div>\n      {bill.payments.length > 0 ? \n        bill.payments.map(p => (\n          <div style={{ display: 'flex', padding: '5px 0px', borderTop: '1px solid #DFDFDF', color: '#808080', fontSize: '9pt' }}>\n            <div style={{ flexGrow: 1 }}>\n              Amount: <span style={{color: '#000000'}}>{currency(p.amount)}</span> &nbsp;\n              Date: <span style={{color: '#000000'}}>{p.date}</span>\n            </div>\n          </div>\n        )) :\n        <div style={{ padding: '10px 0px' }}>(No payment)</div>\n      }\n\n      <div style={{ color: '#808080', fontSize: '9pt', paddingTop: 5, marginTop: 10, textAlign: 'right' }}>\n        Total paid: <span style={{color: '#000000'}}>{currency(bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))}</span> &nbsp;\n        Remaining: <span style={{ color: 'orange' }}>{currency(Math.max(0, bill.amount - (bill.payments.map(p => p.amount).reduce((s, p) => s + p, 0))))}</span>\n      </div>\n    </Paper>\n  )\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;A","sourceRoot":""}